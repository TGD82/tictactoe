<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tic Tac Toe</title>
  <style>
    :root{
      --bg: white;
      --text: black;
      --box-bg: white;
      --box-border: black;
      --char-color: black;
    }
    body.dark{
      --bg: #121212;
      --text: #39ff14;
      --text-border:#9b59b6;
      --char-color: #39ff14;
      --box-bg: #1e1e1e;
      --box-border: #9b59b6;
    }
    *{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body{
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease, color 0.3s ease;
    }
    h1{
      font-size: 50px;
      margin-bottom: 30px;
    }
    #playerInfo{
      font-size: 20px;
      margin-bottom: 20px;
      display: flex;
      gap: 30px;
      align-items: center;
    }
    .player-box{
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .char-box{
      width: 30px;
      height: 30px;
      font-weight: bold;
      font-size: 30px;
      border: 2px solid var(--box-border);
      border-radius: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--char-color);
    }
    #board{
      display: grid;
      grid-template-columns: repeat(3, 110px);
      grid-template-rows: repeat(3, 110px);
      gap: 10px;
      margin: 20px auto;
    }
    .box{
      background-color: var(--box-bg);
      font-size: 40px;
      font-weight: bold;
      color: var(--char-color);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      border-radius: 10px;
      border: 3px solid var(--box-border);
      transition: background 0.3s, color 0.3s;
    }
    .box:hover{
      background-color: #ececec;
    }
    body.dark .box:hover {
      background-color: #2a2a2a;
    }
    #status{
      font-size: 25px;
      margin-top: 10px;
      height: 30px;
    }
    #buttons{
      margin-top: 15px;
    }
    button{
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 20px;
      background-color: #2980b9;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover{
      background-color: #1c5e8a;
    }
    #score{
      margin-top: 10px;
      font-size: 20px;
    }
    .winning{
      background-color: #28a745 !important;
    }
    body.dark .winning{
      background-color: #444444 !important;
    }

  </style>
</head>
<body>
  <h1>Tic Tac Toe</h1>
  <div id="playerInfo">
    <div class="player-box">
      <div id="char1" class="char-box">X</div>
      <span>Player 1</span>
    </div>
    <div class="player-box">
      <div id="char2" class="char-box">O</div>
      <span>Player 2</span>
    </div>
  </div>
  <div id="board"></div>
  <div id="status"></div>
  <div id="score">Player 1: 0 | Player 2: 0</div>
  <div id="buttons">
    <button id="reset">Reset</button>
    <button id="toggleTheme">Toggle Light/Dark</button>
  </div>
  <script>
    const board = document.getElementById("board");
    const status = document.getElementById("status");
    const resetBtn = document.getElementById("reset");
    const toggleThemeBtn = document.getElementById("toggleTheme");
    const char1 = document.getElementById("char1");
    const char2 = document.getElementById("char2");
    const scoreBoard = document.getElementById("score");
    let resetCount = 0;
    let currentTurn;
    let gameOver = false;
    let cells = Array(9).fill("");
    let player1Score = 0;
    let player2Score = 0;
    function getChars(){
      return resetCount % 2 === 0 ? ["X", "O"] : ["O", "X"];
    }
    function updateCharDisplay(){
      const [p1, p2] = getChars();
      char1.textContent = p1;
      char2.textContent = p2;
    }
    function createBoard(){
      board.innerHTML = "";
      for (let i = 0; i < 9; i++){
        const cell = document.createElement("div");
        cell.classList.add("box");
        cell.dataset.index = i;
        cell.textContent = cells[i];
        cell.addEventListener("click", handleClick);
        board.appendChild(cell);
      }
    }
    function handleClick(e){
      const idx = e.target.dataset.index;
      if(cells[idx] !== "" || gameOver) return;
      cells[idx] = currentTurn;
      e.target.textContent = currentTurn;
      checkWinner();
      if(!gameOver){
        currentTurn = currentTurn === "X" ? "O" : "X";
      }
    }
    function checkWinner(){
      const wins = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
      const [p1Char, p2Char] = getChars();
      for(let [a, b, c] of wins){
        if(cells[a] && cells[a] === cells[b] && cells[b] === cells[c]){
          status.textContent = cells[a] + " wins!";
          gameOver = true;
          if(cells[a] === p1Char) player1Score++;
          else player2Score++;
          updateScore();
          document.querySelectorAll(".box")[a].classList.add("winning");
          document.querySelectorAll(".box")[b].classList.add("winning");
          document.querySelectorAll(".box")[c].classList.add("winning");
          return;
        }
      }
      if(!cells.includes("")){
        status.textContent = "It's a draw!";
        gameOver = true;
      }
    }
    function updateScore(){
      scoreBoard.textContent = " Player 1: "+ player1Score +" | Player 2: "+ player2Score;
    }
    function resetGame(){
      resetCount++;
      cells = Array(9).fill("");
      gameOver = false;
      status.textContent = "";
      updateCharDisplay();
      const [p1Char, p2Char] = getChars();
      currentTurn = p1Char === "X" ? p1Char : p2Char;
      createBoard();
      document.querySelectorAll(".box").forEach(box =>{
      box.classList.remove("winning");
      });
    }
    resetBtn.addEventListener("click", resetGame);
    toggleThemeBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      toggleThemeBtn.textContent = document.body.classList.contains("dark") ? "Switch to Light Mode" : "Switch to Dark Mode";
    });
    updateCharDisplay();
    const [p1Char, p2Char] = getChars();
    currentTurn = p1Char === "X" ? p1Char : p2Char;
    createBoard();
  </script>
</body>
</html>
